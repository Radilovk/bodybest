# Въпросник за създаване на профил и алгоритми за анализ

Този документ описва пълния списък от въпроси в основния въпросник за създаване на профил с всички възможни отговори, както и алгоритмите и корелациите между отговорите, които участват във формулите за извеждане на анализи, индекси и зависимости.

---

## ЧАСТ 1: Списък на въпросите с възможни отговори

### Секция 1: Основни данни

| № | ID | Въпрос | Тип | Възможни отговори |
|---|-----|--------|-----|-------------------|
| 1 | `name` | Въведете вашето име: | Текстово поле | (свободен текст) |
| 2 | `gender` | Моля, изберете вашия пол: | Радио бутон | • Мъж<br>• Жена |
| 3 | `age` | Въведете вашата възраст: | Числово поле | (число) |
| 4 | `height` | Въведете вашия ръст (в см): | Числово поле | (число) |
| 5 | `weight` | Въведете вашето тегло (в кг): | Числово поле | (число) |
| 6 | `email` | Въведете вашия имейл адрес: | Имейл поле | (имейл адрес) |
| 7 | `goal` | Изберете основната си цел: | Радио бутон | • Подобряване на здравето<br>• Отслабване<br>• Оформяне<br>• Покачване на мускулна маса<br>• Антиейджинг |
| 7.1 | `lossKg` | Колко килограма бихте искали да свалите? | Числово поле | (число) *Показва се само при избор "Отслабване"* |
| 8 | `motivation` | Доколко мотивирани сте да постигнете целта си? (1-5): | Радио бутон | • ⭐⭐⭐⭐⭐ (5)<br>• ⭐⭐⭐⭐ (4)<br>• ⭐⭐⭐ (3)<br>• ⭐⭐ (2)<br>• ⭐ (1) |

---

### Секция 2: Хранителни навици

| № | ID | Въпрос | Тип | Възможни отговори |
|---|-----|--------|-----|-------------------|
| 9 | `weightChange` | Имали ли сте рязко покачване на тегло? | Радио бутон | • Не<br>• Да |
| 9.1 | `weightChangeDetails` | Колко килограма сте качили? За какъв период? Успяхте ли да ги свалите и ако да, как? | Текстово поле | (свободен текст) *Показва се при избор "Да"* |
| 10 | `dietHistory` | Спазвали ли сте диета през последната година? | Радио бутон | • Не<br>• Да |
| 10.1 | `dietType` | Какъв тип диета? | Падащо меню | • Кето<br>• Веган<br>• Нисковъглехидратна<br>• Друго *Показва се при избор "Да"* |
| 10.2 | `dietResult` | Какъв беше резултатът? | Текстово поле | (свободен текст) *Показва се при избор "Да"* |
| 11 | `sleepHours` | По колко часа на вечер спите? | Радио бутон | • <5<br>• 5-6<br>• 6-7<br>• 7-8<br>• >8 |
| 12 | `sleepInterrupt` | Имате ли прекъсвания на съня? | Радио бутон | • Да<br>• Не |
| 13 | `chronotype` | Вашият хронотип: | Радио бутон | • Сутрешен<br>• Вечерен<br>• Неутрален |
| 14 | `dailyActivityLevel` | Ниво на активност в ежедневието ви (работа, битови задължения): | Радио бутон | • Ниско (предимно седящ режим)<br>• Средно (умерена активност)<br>• Високо (много активен през деня) |
| 15 | `stressLevel` | Ниво на стрес и напрежение в ежедневието ви: | Радио бутон | • Ниско<br>• Средно<br>• Високо |
| 16 | `physicalActivity` | Имате ли спортни занимания, активност (спорт, йога, танци др.) | Радио бутон | • Да<br>• Не |
| 16.1 | `regularActivityTypes` | Изберете вашите регулярни видове активност: | Чекбокс | • Тежести, фитнес<br>• Кардио, аеробни<br>• Танци<br>• Йога<br>• Друго *Показва се при избор "Да"* |
| 16.2 | `otherRegularActivityType` | Какъв вид спорт практикувате? | Текстово поле | (свободен текст) *Показва се при избор "Друго"* |
| 16.3 | `weeklyActivityFrequency` | Колко пъти седмично практикувате вашата активност? | Падащо меню | • 7<br>• 6<br>• 5<br>• 4<br>• 3<br>• 2<br>• 1<br>• <1 *Показва се при избор "Да"* |
| 16.4 | `activityDuration` | Каква е продължителността на вашата активност? | Радио бутон | • 30-60 мин.<br>• 60-90 мин.<br>• 90-120 мин.<br>• 120-180 мин. *Показва се при избор "Да"* |
| 17 | `waterIntake` | Колко вода пиете дневно? | Радио бутон | • <1л<br>• 1-1.5л<br>• 1.5-2л<br>• >2л |
| 18 | `waterReplaceFreq` | Колко често заменяте водата с други напитки? | Радио бутон | • Не<br>• Рядко<br>• Понякога<br>• Често |
| 18.1 | `waterReplacement*` | С какви напитки замествате приема на вода? | Чекбокс | • Сокове<br>• Кафе<br>• Газирани<br>• Друго *Показва се при избор различен от "Не"* |
| 18.2 | `waterReplacement*Other` | Уточнете с какви напитки замествате водата: | Текстово поле | (свободен текст) *Показва се при избор "Друго"* |
| 19 | `overeatingFrequency` | Колко често се случва да ядете повече от планираното количество? | Радио бутон | • Постоянно<br>• Често<br>• Понякога<br>• Рядко<br>• Никога |
| 20 | `foodCravings` | Имате ли повишена нужда от определени храни? | Радио бутон | • Да<br>• Не |
| 20.1 | `foodCravingsDetails` | Кои храни? | Чекбокс | • Сладки храни<br>• Тестени храни<br>• Бургери/дюнери<br>• Чипс/снакс<br>• Алкохолни напитки<br>• Сокове/безалкохолни напитки<br>• Друго *Показва се при избор "Да"* |
| 20.2 | `foodCravingsOther` | Уточнете кои други храни: | Текстово поле | (свободен текст) *Показва се при избор "Друго"* |
| 21 | `foodTriggers` | Кои ситуации предизвикват желание за храна? | Чекбокс | • Напрежение<br>• Скука<br>• Тъга<br>• Социални събития<br>• Нито едно от изброените<br>• Друго |
| 21.1 | `foodTriggersOther` | Уточнете какво създава желание за консумация на определени храни: | Текстово поле | (свободен текст) *Показва се при избор "Друго"* |
| 22 | `nighteat` | Кои от изброените хранителни навици присъстват при вас? | Чекбокс | • Не закусвам<br>• Хапвам на крак каквото и когато мога<br>• Храня се предимно вечер<br>• Хапвам нещо сладко между храненията<br>• Хапвам пред телевизора / компютъра<br>• На периоди съм. Или се ограничавам, или ям каквото си искам<br>• Винаги следя стриктно калориите, които приемам |
| 23 | `compensationmethod` | Използвате ли методи за компенсация след прекомерно хранене? | Чекбокс | • Гладуване<br>• Спорт<br>• Хапчета за отслабване<br>• Друго<br>• Не |
| 23.1 | `compensationMethodOther` | Как компенсирате приема на храна? | Текстово поле | (свободен текст) *Показва се при избор "Друго"* |
| 24 | `comparisson` | Колко често сравнявате външния си вид с други хора (например в социалните мрежи)? | Радио бутон | • Постоянно<br>• Често<br>• Понякога<br>• Рядко<br>• Никога |
| 25 | `eatingOutFrequency` | Колко често се храните навън? (пъти седмично) | Радио бутон | • Доста често (>5)<br>• Често (3-5)<br>• Понякога (1-2)<br>• Рядко (<1)<br>• Никога |
| 26 | `eatingOutType` | Тип хранене навън: | Чекбокс | • Ресторант<br>• Fast food<br>• Пакетирани храни |
| 27 | `alcoholFrequency` | Колко често консумирате алкохол? (пъти седмично) | Радио бутон | • Доста често (>5)<br>• Често (3-5)<br>• Понякога (1-2)<br>• Рядко (<1)<br>• Никога |
| 28 | `foodPreference` | Имате ли хранителни предпочитания? | Радио бутон | • Нямам<br>• Вегетариански режим<br>• Веган режим<br>• Нисковъглехидратен режим<br>• Кетогенен режим<br>• Друго / Не обичам следните: |
| 28.1 | `foodPreferenceDisliked` | Какви са вашите хранителни предпочитания и кои храни не обичате? | Текстово поле | (свободен текст) *Показва се при избор "Друго / Не обичам следните:"* |
| 29 | `mainChallenge` | Най-голямото предизвикателство свързано с вашето хранене и здравословен начин на живот? | Текстово поле | (свободен текст) |
| 30 | `additionalComments` | Има ли нещо, което бихте искали да допълните? | Текстово поле | (свободен текст) |

---

### Секция 3: Медицинско състояние

| № | ID | Въпрос | Тип | Възможни отговори |
|---|-----|--------|-----|-------------------|
| 31 | `medicalConditions` | Медицинско състояние: | Чекбокс | • Инсулинова резистентност<br>• Диабет<br>• Хипотиреоидизъм / Хашимото<br>• Депресия / Тревожност<br>• Хиперхолестеролемия<br>• Цьолиакия / глутенова непоносимост<br>• Лактозна непоносимост<br>• Алергия към мляко<br>• Алергия към яйца<br>• Алергия към ядки<br>• Алергия към соя<br>• PCOS<br>• IBS<br>• IBD (Crohn/UC)<br>• Хиперлипидемия<br>• Анемия<br>• Високи чернодробни ензими<br>• Автоимунно заболяване<br>• Рефлуксна болест<br>• Хеликобактерии<br>• Друго<br>• Нямам |
| 31.1 | `medicalConditionsOther` | Попълнете медицинско състояние/диагноза: | Текстово поле | (свободен текст) *Показва се при избор "Друго"* |
| 32 | `medications` | Приемате ли лекарства / хранителни добавки? | Радио бутон | • Не<br>• Да |
| 32.1 | `medicationsDetails` | Моля опишете какви лекарства и хранителни добавки приемате. Кога и в каква дозировка? | Текстово поле | (свободен текст) *Показва се при избор "Да"* |

---

## ЧАСТ 2: Алгоритми и корелации за анализ

### 2.1 BMI (Индекс на телесна маса)

#### Формула за изчисление:
```
BMI = тегло (кг) / (ръст (м))²
```

#### Използвани въпроси:
- `weight` - Тегло в кг
- `height` - Ръст в см

#### Категории BMI:
| BMI стойност | Категория | Оценка (Score) |
|--------------|-----------|----------------|
| < 14 | Тежко поднормено тегло | 5-20 |
| 14-15 | Умерено поднормено | 20-40 |
| 15-16 | Леко поднормено | 40-65 |
| 16-17 | Гранично поднормено | 65-85 |
| 17-18.5 | Леко поднормено | 85-100 |
| **18.5-25** | **Нормално тегло** | **100** |
| 25-27 | Леко наднормено | 80-100 |
| 27-30 | Наднормено тегло | 60-80 |
| 30-35 | Затлъстяване I степен | 40-60 |
| 35-40 | Затлъстяване II степен | 20-40 |
| 40-45 | Затлъстяване III степен | 5-20 |
| > 45 | Тежко затлъстяване | 5 |

---

### 2.2 Engagement Score (Ангажираност)

#### Формула:
```
engagementScore = cap(  // ограничение 0-100
    (придържане_хранения × 0.4) + 
    (попълнени_индекси × 0.4) + 
    (редовност_дневник × 0.2) +
    бонус_серия +
    бонус_качество
)
```

#### Компоненти и тежести:

| Компонент | Тежест | Описание | Формула |
|-----------|--------|----------|---------|
| Придържане към хранения | 40% | Процент изпълнени хранения | (изпълнени / планирани) × 100 |
| Попълнени индекси | 40% | Процент попълнени дневни показатели | (попълнени / очаквани) × 100 |
| Редовност на дневника | 20% | Процент дни с логове | (дни_с_лог / общо_дни) × 100 |
| Бонус за серия | +5% до +10% | 3-6 дни: +5%, 7+ дни: +10% | — |
| Бонус за качество | +2% до +5% | 3 индекса: +2%, 4+ индекса: +5% | — |

#### Връзка с въпросника:
Този индекс не се влияе директно от въпросника, а от редовността на потребителя в системата.

---

### 2.3 Overall Health Score (Общ здравен индекс)

#### Формула:
```
overallHealthScore = cap(  // ограничение 0-100
    (настроение × 0.15) +
    (енергия × 0.15) +
    (спокойствие × 0.10) +
    (сън × 0.15) +
    (хидратация × 0.10) +
    (BMI_оценка × 0.20) +
    (ангажираност × 0.15)
)
```

#### Компоненти и тежести:

| Компонент | Тежест | Скала | Използван въпрос от дневника |
|-----------|--------|-------|------------------------------|
| Настроение | 15% | 1-5 → 20-100% | `mood` |
| Енергия | 15% | 1-5 → 20-100% | `energy` |
| Спокойствие | 10% | 1-5 → 20-100% | `calmness` |
| Сън | 15% | 1-5 → 20-100% | `sleep` |
| Хидратация | 10% | 1-5 → 20-100% | `hydration` |
| BMI оценка | 20% | 0-100% | Изчислен от `weight` и `height` |
| Ангажираност | 15% | 0-100% | Engagement Score |

#### Конверсия от скала 1-5 към проценти:
```
процент = (стойност / 5) × 100
```
- 1/5 → 20%
- 2/5 → 40%
- 3/5 → 60%
- 4/5 → 80%
- 5/5 → 100%

---

### 2.4 Goal Progress (Напредък към целта)

#### Зависи от въпроса `goal`:

**При цел "Отслабване":**
```
загубени_кг = начално_тегло - текущо_тегло
суров_прогрес = загубени_кг / целеви_кг_за_сваляне

Ако суров_прогрес < 50%:
    прогрес = суров_прогрес × 120    // 0-50% → 0-60%
Иначе:
    прогрес = 60 + (суров_прогрес - 0.5) × 80    // 50-100% → 60-100%
```

**При цел "Покачване на мускулна маса":**
```
качени_кг = текущо_тегло - начално_тегло
прогрес = (качени_кг / целеви_кг) × 100
```

**При цел "Поддържане на тегло":**
```
целево_тегло = стойност от въпросника или начално тегло
базово_отклонение = 3% от целевото тегло
буферно_отклонение = 2% от целевото тегло
реално_отклонение = |текущо_тегло - целево_тегло|

Ако реално_отклонение ≤ базово_отклонение:
    прогрес = 100
Иначе ако реално_отклонение ≤ (базово + буферно):
    прогрес = 100 - ((реално - базово) / буферно) × 10
Иначе:
    прогрес = макс(0, 90 - ((реално - базово - буферно) / базово) × 60)
```

#### Използвани въпроси:
- `goal` - Избрана цел
- `lossKg` - Килограми за сваляне (при отслабване)
- `weight` - Начално тегло

---

### 2.5 Калкулация на макронутриенти

#### Калории на грам:
| Макронутриент | kcal/грам |
|---------------|-----------|
| Протеин | 4 |
| Въглехидрати | 4 |
| Мазнини | 9 |
| Фибри | 2 |
| Алкохол | 7 |

#### Формула за дневни калории (Mifflin-St Jeor):

**За мъже:**
```
BMR = (10 × тегло_кг) + (6.25 × ръст_см) - (5 × възраст) + 5
```

**За жени:**
```
BMR = (10 × тегло_кг) + (6.25 × ръст_см) - (5 × възраст) - 161
```

#### Коефициент на активност (от `dailyActivityLevel` и `physicalActivity`):

| Ниво на активност | Коефициент |
|-------------------|------------|
| Ниско (седящ режим) | 1.2 |
| Средно (умерена активност) | 1.55 |
| Високо (много активен) | 1.725 |

#### Корекция спрямо целта (`goal`):

| Цел | Корекция на калории |
|-----|---------------------|
| Отслабване | -20% до -25% |
| Поддържане | 0% |
| Покачване на маса | +10% до +20% |
| Оформяне | -10% до -15% |

#### Използвани въпроси:
- `gender` - Пол
- `age` - Възраст
- `weight` - Тегло
- `height` - Ръст
- `dailyActivityLevel` - Ниво на ежедневна активност
- `physicalActivity` - Физическа активност
- `weeklyActivityFrequency` - Честота на тренировки
- `goal` - Избрана цел

---

### 2.6 Детайлни метрики и зависимости

#### Качество на съня:
| Въпрос | Влияние |
|--------|---------|
| `sleepHours` | Основен показател за продължителност |
| `sleepInterrupt` | Коригиращ фактор при прекъсвания |
| `chronotype` | Определя оптимално време за хранене |

**Интерпретация на `sleepHours`:**
| Отговор | Оценка |
|---------|--------|
| <5 | Лошо (1-2/5) |
| 5-6 | Задоволително (2-3/5) |
| 6-7 | Добро (3-4/5) |
| 7-8 | Много добро (4-5/5) |
| >8 | Може да е прекалено (3-4/5) |

#### Ниво на стрес:
| Въпрос | Влияние |
|--------|---------|
| `stressLevel` | Основен показател |
| `foodTriggers` | Индикатор за емоционално хранене |
| `comparisson` | Социален стрес |
| `overeatingFrequency` | Поведенчески индикатор |

**Корелация стрес → хранене:**
- Високо ниво на стрес + тригери "Напрежение" или "Тъга" → Повишен риск от емоционално хранене
- Често сравняване + високо преяждане → Може да се препоръча психологическа подкрепа

#### Хидратация:
| Въпрос | Влияние |
|--------|---------|
| `waterIntake` | Основен показател |
| `waterReplaceFreq` | Коригиращ фактор |

**Интерпретация:**
| Прием на вода | Замяна с други | Оценка |
|---------------|----------------|--------|
| >2л | Не/Рядко | Отлично |
| 1.5-2л | Не/Рядко | Много добро |
| 1-1.5л | Понякога | Задоволително |
| <1л | Често | Нуждае се от подобрение |

---

### 2.7 Медицински съображения и алергии

#### Въпрос `medicalConditions` → Ограничения в плана:

| Състояние | Ефект върху плана |
|-----------|-------------------|
| Диабет / Инсулинова резистентност | Нисък гликемичен индекс, контрол на въглехидратите |
| Хипотиреоидизъм / Хашимото | Избягване на зобогенни храни, достатъчен йод |
| Цьолиакия / глутенова непоносимост | Безглутенов режим |
| Лактозна непоносимост | Безлактозни алтернативи |
| Алергия към мляко | Изключване на млечни продукти |
| Алергия към яйца | Изключване на яйца |
| Алергия към ядки | Изключване на ядки |
| Алергия към соя | Изключване на соя |
| PCOS | Балансиран инсулинов профил |
| IBS / IBD | Щадящ режим, FODMAP подход |
| Хиперлипидемия / Хиперхолестеролемия | Ниско съдържание на наситени мазнини |
| Анемия | Богата на желязо диета |
| Рефлуксна болест | Избягване на провокиращи храни |
| Хеликобактерии | Диетични ограничения |

#### Въпрос `foodPreference` → Тип режим:

| Предпочитание | Ефект |
|---------------|-------|
| Вегетариански | Изключване на месо |
| Веган | Изключване на всички животински продукти |
| Нисковъглехидратен | Ограничение на въглехидратите до 20-25% |
| Кетогенен | Много ниски въглехидрати (<5%), високи мазнини |

---

### 2.8 Психологически профил и хранителни навици

#### Рискови индикатори за нездравословно отношение към храната:

| Въпрос | Рисков отговор | Значение |
|--------|----------------|----------|
| `overeatingFrequency` | Постоянно / Често | Възможен риск от преяждане |
| `compensationmethod` | Гладуване / Хапчета | Рисково компенсаторно поведение |
| `comparisson` | Постоянно / Често | Социално сравняване |
| `foodTriggers` | Напрежение / Тъга | Емоционално хранене |
| `nighteat` | "Храня се предимно вечер" | Нощно хранене |
| `foodCravings` | Да (много храни) | Хранителни пристрастия |

#### Стратегии при рискови профили:
- Препоръки за психологическа подкрепа
- Постепенно, а не рязко ограничение
- Фокус върху здраве, не само тегло
- Mindful eating техники

---

### 2.9 Серийна визуализация (Streak)

#### Изчисление:
```
За последните 7 дни:
    - Проверка дали има лог запис за всеки ден
    - Броене на последователни дни с логове от днес назад
```

#### Визуализация:
- `dailyStatusArray`: масив от 7 обекта { date, logged: true/false }
- `currentCount`: текущ брой последователни дни

---

## ЧАСТ 3: Обобщение на връзките

### Въпроси → Формули (Карта на зависимостите)

| Въпрос | Участва в |
|--------|-----------|
| `weight` | BMI, Goal Progress, Макроси |
| `height` | BMI, Макроси |
| `age` | Макроси (BMR) |
| `gender` | Макроси (BMR) |
| `goal` | Goal Progress, Макроси (корекция) |
| `lossKg` | Goal Progress (при отслабване) |
| `dailyActivityLevel` | Макроси (коефициент) |
| `physicalActivity` | Макроси (коефициент) |
| `weeklyActivityFrequency` | Макроси (коефициент) |
| `sleepHours` | Качество на съня, Препоръки |
| `sleepInterrupt` | Качество на съня |
| `stressLevel` | Health Score, Психологически профил |
| `waterIntake` | Хидратация, Препоръки |
| `waterReplaceFreq` | Хидратация |
| `medicalConditions` | Ограничения в плана |
| `foodPreference` | Тип режим |
| `overeatingFrequency` | Психологически профил |
| `foodTriggers` | Психологически профил |
| `compensationmethod` | Психологически профил |
| `comparisson` | Психологически профил |
| `alcoholFrequency` | Препоръки за лимитиране |
| `eatingOutFrequency` | Препоръки за планиране |

---

## ЧАСТ 4: Дневни показатели (Daily Tracker)

### Показатели от дневния лог:

| Показател | ID | Скала | Описание нива |
|-----------|-----|-------|---------------|
| Тегло | `weight` | кг | Текущо тегло |
| Настроение | `mood` | 1-5 | 1: Тъжно → 5: Щастливо |
| Енергия | `energy` | 1-5 | 1: Изтощен → 5: Енергичен |
| Спокойствие | `calmness` | 1-5 | 1: Напрегнат → 5: Спокоен |
| Хидратация | `hydration` | 1-5 | 1: Дехидратиран → 5: Отлично хидратиран |
| Сън | `sleep` | 1-5 | 1: Много лошо → 5: Освежаващо |

### Нива и интерпретации:

**Настроение (mood):**
- 1: Тъжно/Депресирано
- 2: Не много добре
- 3: Неутрално
- 4: Добре/Позитивно
- 5: Щастливо/Отлично

**Енергия (energy):**
- 1: Много ниска/Изтощен
- 2: По-ниска от обичайното
- 3: Средна/Нормална
- 4: По-висока от обичайното
- 5: Много висока/Енергичен

**Спокойствие (calmness):**
- 1: Много неспокоен/Напрегнат
- 2: Леко неспокоен
- 3: Неутрално/Нормално
- 4: Сравнително спокоен
- 5: Много спокоен/Релаксиран

**Хидратация (hydration):**
- 1: Много жаден/Дехидратиран
- 2: Леко жаден
- 3: Нормално
- 4: Добре хидратиран
- 5: Отлично хидратиран

**Качество на съня (sleep):**
- 1: Много лошо/Не спах
- 2: Лошо/Накъсано
- 3: Средно/Задоволително
- 4: Добро/Сравнително добре
- 5: Отлично/Освежаващо

---

*Документът е генериран автоматично на базата на конфигурацията в `questions.json` и алгоритмите в системата.*
