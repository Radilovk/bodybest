# Пътеводител за разработчици

Този документ има за цел да помогне на новите сътрудници бързо да се ориентират в проекта **BodyBest** и да научат основните стъпки за работа.

## Обща структура

- **HTML файлове** – потребителски интерфейс за въпросници, профили и администраторски страници.
- **`js/`** – всички клиентски скриптове са разделени по функционалност.
- **`worker.js` / `preworker.js`** – основният Cloudflare Worker. Използвайте `preworker.js` само за локална разработка; при `npm run build` съдържанието се копира в `worker.js`, който се деплойва в Cloudflare.
- **`scripts/`** – помощни инструменти за тестове и поддръжка.
- **`docs/`** – примерни JSON структури, API документация (Typedoc) и настоящото ръководство.

## Основни команди

Изпълнявайте следните команди в корена на проекта:

```bash
npm install       # инсталира зависимостите
npm run dev       # стартира локалния сървър с Vite
npm run lint      # проверява стила със ESLint
npm test          # изпълнява Jest тестовете
npm run build     # създава оптимизиран билд в папка dist/
npm run docs      # генерира API документация в docs/api
```

Преди да направите commit се уверете, че `npm run lint` и `npm test` минават успешно.

## Синхронизация на worker файловете

Файловете `worker.js` и `preworker.js` трябва да са напълно идентични. Скриптът `scripts/check-worker-sync.js` проверява това автоматично при `npm test`. Ако тестовете прекъснат с грешка за несъответствие, пуснете `npm run build` или копирайте съдържанието на `preworker.js` в `worker.js`.
Помнете, че `preworker.js` служи само за локална разработка, а `worker.js` се качва в Cloudflare.

## Бърз работен процес

1. Извикайте `npm run dev` и отворете `http://localhost:5173`.
2. Правете промени в HTML/JS файловете – Vite презарежда страницата автоматично.
3. Пускайте `npm run lint` и `npm test` преди commit.
4. След одобрение в GitHub Actions се изпълнява `wrangler deploy` и работникът се обновява.

Допълнителни детайли за настройка на Cloudflare Worker и околните променливи ще откриете в [README.md](../README.md).

## Съвети за оптимизация

- Спазвайте съществуващата структура на папките и имената на файловете.
- Добавяйте кратки коментари, когато логиката не е очевидна.
- Мислете за повторно използваеми функции и модули.
- Проверявайте дали има тестове за новата функционалност и създавайте при нужда.



### Персонализиране на прогрес баровете

Цветът на сиянието около запълнената част се управлява чрез CSS променливата `--progress-bar-glow-color`. По подразбиране тя следва зеления тон от `--color-success`.

Може да промените стойността глобално или в конкретен контейнер:

```css
:root {
  --progress-bar-glow-color: rgba(255, 140, 0, 0.7); /* оранжево сияние */
}
```
