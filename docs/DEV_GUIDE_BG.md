# Пътеводител за разработчици

Този документ има за цел да помогне на новите сътрудници бързо да се ориентират в проекта **BodyBest** и да научат основните стъпки за работа.

## Обща структура

- **HTML файлове** – потребителски интерфейс за въпросници, профили и администраторски страници.
- **`js/`** – всички клиентски скриптове са разделени по функционалност.
- **`worker.js`** – основният Cloudflare Worker, който се деплойва в Cloudflare.
- **`scripts/`** – помощни инструменти за тестове и поддръжка.
- **`docs/`** – примерни JSON структури, API документация (Typedoc) и настоящото ръководство.

## Основни команди

Изпълнявайте следните команди в корена на проекта:

```bash
npm install       # инсталира зависимостите
npm run dev       # стартира локалния сървър с Vite
npm run lint      # проверява стила със ESLint
npm test          # изпълнява Jest тестовете
npm run test:watch # пуска само модифицираните тестове
npm run test:file js/__tests__/adminConfig.test.js # пуска конкретен файл
npm run build     # създава оптимизиран билд в папка dist/
npm run docs      # генерира API документация в docs/api
```

Преди да направите commit се уверете, че `npm run lint` и `npm test` минават успешно.

Препоръчително е за локална работа да използвате `npm run test:watch`,
защото стартира само променените тестове и ускорява процеса.
А ако искате да стартирате само конкретен файл, ползвайте `npm run test:file <път>`.


1. Извикайте `npm run dev` и отворете `http://localhost:5173`.
2. Правете промени в HTML/JS файловете – Vite презарежда страницата автоматично.
3. Пускайте `npm run lint` и `npm test` преди commit.
4. След одобрение в GitHub Actions се изпълнява `wrangler deploy` и работникът се обновява.

Допълнителни детайли за настройка на Cloudflare Worker и околните променливи ще откриете в [README.md](../README.md).

## Управление на имейлите

Стойностите на темплейтите за писмата се съхраняват в `RESOURCES_KV` и могат да се редактират през `admin.html`.
След регистрация се изпраща приветствен имейл, а при готов начален анализ – писмо с линк към `analyze.html`.
Изпращането може да се изключи чрез променливите `send_welcome_email` и `send_analysis_email` (стойност `0` или `false`).


## Съвети за оптимизация

- Спазвайте съществуващата структура на папките и имената на файловете.
- Добавяйте кратки коментари, когато логиката не е очевидна.
- Мислете за повторно използваеми функции и модули.
- Проверявайте дали има тестове за новата функционалност и създавайте при нужда.

## Цветови теми

Файлът `js/themeConfig.js` съдържа групирани променливи за цветовете на
потребителския интерфейс. Админ панелът използва този списък, за да създава
интерфейс за редакция по категории. Темите могат да се експортират и импортират
в JSON формат чрез бутоните **Изтегли тема** и **Качи тема** в секцията
"Настройки на цветове".


