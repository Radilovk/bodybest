/**
 * psyadvice.js - Пълни данни за психологически профили от psyadvice.txt
 * Съдържа структурирана информация за всеки от 16-те типови кода
 */

/**
 * Структура за всеки профил:
 * - typeCode: типов код (напр. X-S-D-P)
 * - description: кратко описание на типа
 * - traits: личностни черти
 * - eatingRisks: рискове при хранене
 * - directions: насоки за хранене
 * - communication: комуникационен стил
 */
export const psyadviceProfiles = {
  'X-S-D-P': {
    typeCode: 'X-S-D-P',
    description: 'Интровертен, практичен, директен, ниска структура.',
    traits: 'Действа самостоятелно, импулсивен, труден ритъм.',
    eatingRisks: [
      'Пропускане на хранения',
      'Ядене накрак, късно',
      'Ниска последователност'
    ],
    directions: [
      'Фиксирани опорни хранения',
      'Прост, повтаряем режим',
      'Минимален избор, готови решения'
    ],
    communication: [
      'Кратка, ясна, без обяснения',
      'Фокус върху действие, не теория',
      'Избягвай морализиране и контрол'
    ]
  },
  'X-S-D-J': {
    typeCode: 'X-S-D-J',
    description: 'Интровертен, практичен, директен, структуриран.',
    traits: 'Контролиран, устойчив, резултатно ориентиран.',
    eatingRisks: [
      'Твърде строг режим',
      'Игнориране на сигнали за глад',
      'Контрол вместо адаптация'
    ],
    directions: [
      'Структурирано, но гъвкаво меню',
      'Планирани отклонения',
      'Обучение за слушане на тялото'
    ],
    communication: [
      'Логична, аргументирана',
      'Показвай полза и ефективност',
      'Уважавай автономията му'
    ]
  },
  'X-S-M-P': {
    typeCode: 'X-S-M-P',
    description: 'Интровертен, практичен, мек, гъвкав.',
    traits: 'Адаптивен, избягва конфликт, пасивен.',
    eatingRisks: [
      'Хранене според средата',
      'Пропускане на лични нужди',
      'Нерегулярен ритъм'
    ],
    directions: [
      'Ясно лично хранително време',
      'Предварителен план',
      'Работа с граници'
    ],
    communication: [
      'Мек тон, без натиск',
      'Задавай въпроси, не заповеди',
      'Валидирай нуждите му'
    ]
  },
  'X-S-M-J': {
    typeCode: 'X-S-M-J',
    description: 'Интровертен, практичен, мек, структуриран.',
    traits: 'Надежден, търсещ сигурност.',
    eatingRisks: [
      'Рутинност без разнообразие',
      'Страх от промяна',
      'Тревожност при нови храни'
    ],
    directions: [
      'Бавни, контролирани промени',
      'Малки експерименти',
      'Стабилна основа'
    ],
    communication: [
      'Спокойна, предвидима',
      'Предварително обяснение',
      'Избягвай изненади'
    ]
  },
  'X-V-D-P': {
    typeCode: 'X-V-D-P',
    description: 'Интровертен, новаторски, директен, спонтанен.',
    traits: 'Креативен, независим, хаотичен.',
    eatingRisks: [
      'Резки смени на диети',
      'Импулсивни ограничения',
      'Срив след ентусиазъм'
    ],
    directions: [
      'Един експеримент наведнъж',
      'Времево ограничени проби',
      'Ясно начало и край'
    ],
    communication: [
      'Директна, но не контролираща',
      'Остави избор в рамка',
      'Не ограничавай свободата рязко'
    ]
  },
  'X-V-D-J': {
    typeCode: 'X-V-D-J',
    description: 'Интровертен, новаторски, директен, структуриран.',
    traits: 'Стратегически, автономен.',
    eatingRisks: [
      'Прекален контрол',
      'Функционално хранене без удоволствие'
    ],
    directions: [
      'Баланс ефективност–удоволствие',
      'Включване на непланирани елементи',
      'Работа със стрес'
    ],
    communication: [
      'Говори като с равен',
      'Аргументирай всяка стъпка',
      'Избягвай банални съвети'
    ]
  },
  'X-V-M-P': {
    typeCode: 'X-V-M-P',
    description: 'Интровертен, новаторски, мек, гъвкав.',
    traits: 'Чувствителен, разпиляващ се.',
    eatingRisks: [
      'Емоционално и импулсивно хранене',
      'Липса на структура',
      'Чести колебания'
    ],
    directions: [
      'Минимална рамка',
      'Редовни хранения',
      'Работа с импулса, не с храната'
    ],
    communication: [
      'Подкрепяща, ненатрапчива',
      'Помагай да избира, не решавай вместо него',
      'Избягвай критика'
    ]
  },
  'X-V-M-J': {
    typeCode: 'X-V-M-J',
    description: 'Интровертен, новаторски, мек, структуриран.',
    traits: 'Дълбоко мислещ, вътрешно напрегнат.',
    eatingRisks: [
      'Свръхобмисляне',
      'Страх от грешка',
      'Контрол през планиране'
    ],
    directions: [
      'Опростяване',
      'Доверие в базов режим',
      'Намаляване на когнитивния шум'
    ],
    communication: [
      'Ясна, подредена',
      'Не претоварвай с избори',
      'Подчертавай достатъчност, не оптимум'
    ]
  },
  'E-S-D-P': {
    typeCode: 'E-S-D-P',
    description: 'Екстровертен, практичен, директен, спонтанен.',
    traits: 'Действен, ориентиран към действие.',
    eatingRisks: [
      'Бързо хранене',
      'Преяждане',
      'Игнориране на ситост'
    ],
    directions: [
      'По-бавно темпо',
      'Ясни порции',
      'Структурирани паузи'
    ],
    communication: [
      'Кратка и енергична',
      'Фокус върху резултат',
      'Не задържай вниманието дълго'
    ]
  },
  'E-S-D-J': {
    typeCode: 'E-S-D-J',
    description: 'Екстровертен, практичен, директен, структуриран.',
    traits: 'Контролиращ, лидерски.',
    eatingRisks: [
      'Режим като дисциплина',
      'Наказателно отношение'
    ],
    directions: [
      'Устойчив дългосрочен план',
      'Гъвкави правила',
      'Редуциране на контрола'
    ],
    communication: [
      'Ясни цели и правила',
      'Говори за стратегия',
      'Избягвай емоционален език'
    ]
  },
  'E-S-M-P': {
    typeCode: 'E-S-M-P',
    description: 'Екстровертен, практичен, мек, гъвкав.',
    traits: 'Социален, подкрепящ.',
    eatingRisks: [
      'Хранене за компания',
      'Трудно казва "не"',
      'Излишен прием'
    ],
    directions: [
      'Предварителни решения',
      'Личен хранителен план',
      'Работа с граници'
    ],
    communication: [
      'Топла, човешка',
      'Насърчавай, не натискай',
      'Утвърждавай личния избор'
    ]
  },
  'E-S-M-J': {
    typeCode: 'E-S-M-J',
    description: 'Екстровертен, практичен, мек, структуриран.',
    traits: 'Грижовен, стабилен.',
    eatingRisks: [
      'Поставя другите пред себе си',
      'Пропускане на хранения'
    ],
    directions: [
      'Приоритет към личния ритъм',
      'Планирани паузи',
      'Грижа към себе си'
    ],
    communication: [
      'Признателна и уважителна',
      'Подчертавай нуждата от самогрижа',
      'Не експлоатирай отговорността му'
    ]
  },
  'E-V-D-P': {
    typeCode: 'E-V-D-P',
    description: 'Екстровертен, новаторски, директен, спонтанен.',
    traits: 'Висока енергия, търси интензивност.',
    eatingRisks: [
      'Крайни режими',
      'Стимулантно хранене',
      'Бърноут'
    ],
    directions: [
      'Стабилизиране на ритъма',
      'Ограничаване на крайности',
      'Възстановяване'
    ],
    communication: [
      'Динамична, мотивираща',
      'Поставяй граници ясно',
      'Канализирай енергията'
    ]
  },
  'E-V-D-J': {
    typeCode: 'E-V-D-J',
    description: 'Екстровертен, новаторски, директен, структуриран.',
    traits: 'Визионер, силна воля.',
    eatingRisks: [
      'Пренебрегване на възстановяването',
      'Храна като гориво'
    ],
    directions: [
      'Планирано възстановяване',
      'Фокус върху дългосрочност'
    ],
    communication: [
      'Стратегическа, на ниво визия',
      'Не спори за дреболии',
      'Уважавай темпото му'
    ]
  },
  'E-V-M-P': {
    typeCode: 'E-V-M-P',
    description: 'Екстровертен, новаторски, мек, гъвкав.',
    traits: 'Емоционален, нестабилен.',
    eatingRisks: [
      'Емоционално хранене',
      'Хаотичен режим'
    ],
    directions: [
      'Редовност',
      'Работа с емоционалния тригер',
      'Прости правила'
    ],
    communication: [
      'Емоционално присъствие',
      'Стабилен, спокоен тон',
      'Не усилвай драмата'
    ]
  },
  'E-V-M-J': {
    typeCode: 'E-V-M-J',
    description: 'Екстровертен, новаторски, мек, структуриран.',
    traits: 'Интегративен, балансиран.',
    eatingRisks: [
      'Пренатоварване от ангажименти'
    ],
    directions: [
      'Поддържащ, балансиран режим',
      'Защита на личния ресурс'
    ],
    communication: [
      'Партньорска',
      'Признавай усилията',
      'Пази баланса работа–възстановяване'
    ]
  }
};

/**
 * Получава профил по typeCode
 * @param {string} typeCode - Типов код (напр. X-S-D-P, E-V-M-J)
 * @returns {Object|null} Профил или null ако не е намерен
 */
export function getProfileByTypeCode(typeCode) {
  if (!typeCode) return null;
  // Нормализиране на кода (главни букви, правилни разделители)
  const normalized = typeCode.toUpperCase().replace(/[^EXSVDMPJ-]/g, '');
  return psyadviceProfiles[normalized] || null;
}

/**
 * Генерира пълно описание за профил
 * @param {string} typeCode - Типов код
 * @returns {string} Пълно текстово описание
 */
export function getFullProfileDescription(typeCode) {
  const profile = getProfileByTypeCode(typeCode);
  if (!profile) return '';
  
  let desc = `${profile.description} ${profile.traits}\n\n`;
  desc += `Хранене – риск:\n${profile.eatingRisks.map(r => `• ${r}`).join('\n')}\n\n`;
  desc += `Насока:\n${profile.directions.map(d => `• ${d}`).join('\n')}\n\n`;
  desc += `Комуникация:\n${profile.communication.map(c => `• ${c}`).join('\n')}`;
  
  return desc;
}

/**
 * Генерира структуриран обект за AI интеграция
 * @param {string} typeCode - Типов код
 * @returns {Object|null} Структуриран обект за AI или null
 */
export function getProfileForAI(typeCode) {
  const profile = getProfileByTypeCode(typeCode);
  if (!profile) return null;
  
  return {
    typeCode: profile.typeCode,
    description: profile.description,
    traits: profile.traits,
    eatingRisks: profile.eatingRisks,
    directions: profile.directions,
    communication: profile.communication,
    // Генериране на обобщение за AI
    summary: `Личностен тип ${profile.typeCode}: ${profile.description} ${profile.traits}`,
    // Препоръки за AI асистент
    aiGuidelines: {
      tone: profile.communication.join('; '),
      focusAreas: profile.directions,
      avoidTopics: profile.eatingRisks.map(r => `Риск: ${r}`)
    }
  };
}

export default psyadviceProfiles;
